#include <iostream>

using namespace std;
int tetris[500][500];
int calculate(int X, int Y);

int main() {
    int N, M;
    cin >> N >> M;

    for(int i = 0; i<N; i++) {
        for(int j = 0; j<M; j++) {
            cin >> tetris[i][j];
        }
    }

    int ver[19][4][2] = {
        {{0,0}, {0,1}, {0,2}, {0, 3}},
        {{0,0}, {1,0}, {2,0}, {3, 0}},

        {{0,0}, {0,1}, {1,0}, {1, 1}},

        {{0,0}, {1,0}, {2,0}, {2, 1}},
        {{0,0}, {1,0}, {2,0}, {0, 1}},
        {{0,0}, {0,1}, {0,2}, {1, 2}},
        {{1,0}, {1,1}, {1,2}, {0, 2}},
        
        {{0,1}, {1,1}, {2,1}, {2, 0}},
        {{0,0}, {0,1}, {1,1}, {2, 1}},
        {{0,0}, {1,0}, {1,1}, {1, 2}},
        {{0,0}, {0,1}, {0,2}, {1, 0}},
        
        {{0,0}, {0,1}, {0,2}, {1, 1}},
        {{0,1}, {1,1}, {2,1}, {1, 0}},
        {{0,0}, {1,0}, {1,1}, {2, 0}},
        {{0,1}, {1,0}, {1,1}, {1, 2}},

        {{0,0}, {1,0}, {1,1}, {2, 1}},
        {{1, 1}, {0,1}, {0,2}, {1, 0}},
        {{0,1}, {1,1}, {1,0}, {2, 0}},
        {{0,0}, {0,1}, {1,1}, {1, 2}}
    };
                            

    int m = 0;
    // first test

    for(int i = 0; i<N; i++) {
        for(int j = 0; j<M; j++) {
            for(int k = 0; k<19; k++) {
                int s = 0;
                for(int m = 0; m<4; m++) {
                    int x = i + ver[k][m][0];
                    int y = j + ver[k][m][1];
                    if(x >= N || y >= M) {
                        s = 0;
                        break;
                    }
                    s += tetris[x][y];
                }
                m = max(s, m);
            }
        }
    }
    cout << m << endl;
}

